import { EventEmitter } from 'events';
import type { NotificationChannel, NotificationChannelConfig, JobNotification, NotificationHandler, NotificationChannelState, JobStateNotification, StateNotificationHandler } from '../types/NotificationChannel.js';
/**
 * Internal config type with all properties required
 */
interface ResolvedNotificationChannelConfig {
    channelName: string;
    reconnect: {
        enabled: boolean;
        maxAttempts: number;
        initialDelayMs: number;
        maxDelayMs: number;
    };
}
/**
 * Abstract base class for notification channels.
 * Provides common functionality like state management and reconnection logic.
 */
export declare abstract class BaseNotificationChannel extends EventEmitter implements NotificationChannel {
    protected _state: NotificationChannelState;
    protected handlers: Set<NotificationHandler>;
    protected stateHandlers: Set<StateNotificationHandler>;
    protected reconnectAttempts: number;
    protected reconnectTimeout?: ReturnType<typeof setTimeout>;
    protected readonly config: ResolvedNotificationChannelConfig;
    constructor(config?: NotificationChannelConfig);
    get state(): NotificationChannelState;
    protected setState(newState: NotificationChannelState): void;
    abstract connect(): Promise<void>;
    abstract disconnect(): Promise<void>;
    abstract publish(notification: JobNotification): Promise<void>;
    subscribe(handler: NotificationHandler): () => void;
    protected notifyHandlers(notification: JobNotification): Promise<void>;
    /**
     * Notify all registered state handlers of a state notification.
     * Subclasses should call this when receiving state notifications.
     */
    protected notifyStateHandlers(notification: JobStateNotification): Promise<void>;
    /**
     * Subscribe to state notifications.
     * Default implementation manages the stateHandlers set.
     */
    subscribeState(handler: StateNotificationHandler): () => void;
    protected scheduleReconnect(): void;
    protected clearReconnect(): void;
}
export {};
